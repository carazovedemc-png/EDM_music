<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EDM Music</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!-- Анимированный градиентный фон -->
    <div class="animated-gradient-bg"></div>
    <div class="particles-container" id="particles"></div>
    
    <div class="app-container">
        <!-- Верхняя панель -->
        <header class="app-header glass-effect">
            <div class="header-left">
                <div class="logo-wrapper">
                    <div class="logo-icon">
                        <i class="fas fa-music"></i>
                    </div>
                    <h1 class="app-logo">EDM_Music</h1>
                </div>
            </div>
            
            <div class="header-right">
                <button class="header-btn search-toggle" id="searchToggle">
                    <i class="fas fa-search"></i>
                </button>
                <button class="header-btn profile-btn" id="profileBtn">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </header>

        <!-- Поисковая строка -->
        <div class="search-container glass-effect" id="searchContainer">
            <div class="search-wrapper">
                <input type="text" 
                       class="search-input" 
                       id="searchInput" 
                       placeholder="Поиск треков, исполнителей...">
                <button class="search-action-btn" id="searchActionBtn">
                    <i class="fas fa-search"></i>
                </button>
                <button class="search-close-btn" id="searchCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Основной контент -->
        <main class="main-content">
            <!-- Быстрые фильтры -->
            <section class="quick-filters">
                <div class="filters-scroll">
                    <button class="filter-chip active" data-filter="all">
                        <i class="fas fa-fire"></i> Все
                    </button>
                    <button class="filter-chip" data-filter="trending">
                        <i class="fas fa-chart-line"></i> Тренды
                    </button>
                    <button class="filter-chip" data-filter="new">
                        <i class="fas fa-star"></i> Новинки
                    </button>
                    <button class="filter-chip" data-filter="energetic">
                        <i class="fas fa-bolt"></i> Энергия
                    </button>
                    <button class="filter-chip" data-filter="chill">
                        <i class="fas fa-spa"></i> Чилл
                    </button>
                    <button class="filter-chip" data-filter="mix">
                        <i class="fas fa-blender"></i> Микс
                    </button>
                </div>
            </section>

            <!-- Рекомендации -->
            <section class="recommendations">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-headphones-alt"></i> Рекомендуем вам
                    </h2>
                    <button class="section-action" id="refreshRecommendations">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>

                <!-- Сетка треков -->
                <div class="tracks-grid" id="tracksGrid">
                    <!-- Треки загружаются через JavaScript -->
                </div>
            </section>

            <!-- Плейлисты -->
            <section class="playlists-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-list-music"></i> Подборки
                    </h2>
                    <button class="section-action" id="seeAllPlaylists">
                        Все <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <div class="playlists-scroll">
                    <div class="playlist-card" style="background: linear-gradient(135deg, #ff6b6b, #ffa8a8);">
                        <div class="playlist-overlay"></div>
                        <div class="playlist-info">
                            <h3>Топ EDM 2024</h3>
                            <p>25 треков</p>
                            <button class="playlist-play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="playlist-card" style="background: linear-gradient(135deg, #4ecdc4, #44a08d);">
                        <div class="playlist-overlay"></div>
                        <div class="playlist-info">
                            <h3>Чилл-волна</h3>
                            <p>18 треков</p>
                            <button class="playlist-play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="playlist-card" style="background: linear-gradient(135deg, #ffd166, #ff9a76);">
                        <div class="playlist-overlay"></div>
                        <div class="playlist-info">
                            <h3>Энергия клуба</h3>
                            <p>32 трека</p>
                            <button class="playlist-play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Нижний плеер -->
        <div class="mini-player glass-effect" id="miniPlayer">
            <div class="player-track-info">
                <div class="track-thumbnail" id="playerThumbnail">
                    <i class="fas fa-music"></i>
                </div>
                <div class="track-details">
                    <h4 class="track-title" id="playerTrackTitle">Выберите трек</h4>
                    <p class="track-artist" id="playerTrackArtist">Для воспроизведения</p>
                </div>
            </div>
            
            <div class="player-controls">
                <button class="player-btn favorite-btn" id="miniFavoriteBtn">
                    <i class="far fa-heart"></i>
                </button>
                <button class="player-btn play-btn" id="miniPlayBtn">
                    <i class="fas fa-play"></i>
                </button>
                <button class="player-btn expand-btn" id="expandPlayerBtn">
                    <i class="fas fa-expand-alt"></i>
                </button>
            </div>
        </div>

        <!-- Нижняя навигация -->
        <nav class="bottom-navigation glass-effect">
            <button class="nav-item active" data-page="home">
                <div class="nav-icon">
                    <i class="fas fa-home"></i>
                </div>
                <span class="nav-label">Главная</span>
            </button>
            
            <button class="nav-item" data-page="explore">
                <div class="nav-icon">
                    <i class="fas fa-compass"></i>
                </div>
                <span class="nav-label">Поиск</span>
            </button>
            
            <button class="nav-item" data-page="library">
                <div class="nav-icon">
                    <i class="fas fa-music"></i>
                </div>
                <span class="nav-label">Моя музыка</span>
            </button>
            
            <button class="nav-item" data-page="favorites">
                <div class="nav-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <span class="nav-label">Избранное</span>
            </button>
        </nav>

        <!-- Полноэкранный плеер -->
        <div class="fullscreen-player" id="fullscreenPlayer">
            <!-- Анимированный фон -->
            <div class="player-background" id="playerBackground"></div>
            
            <!-- Верхняя панель -->
            <div class="player-header">
                <button class="player-close-btn" id="closeFullscreenPlayer">
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="player-header-info">
                    <h3>Сейчас играет</h3>
                    <p>EDM Music</p>
                </div>
                <button class="player-menu-btn" id="playerMenuBtn">
                    <i class="fas fa-ellipsis-h"></i>
                </button>
            </div>

            <!-- Обложка трека -->
            <div class="player-album-art" id="fullscreenAlbumArt">
                <div class="album-art-container">
                    <div class="vinyl-record">
                        <div class="vinyl-center"></div>
                    </div>
                    <img src="" alt="" class="album-art-image" id="albumArtImage">
                </div>
            </div>

            <!-- Информация о треке -->
            <div class="player-track-info">
                <h1 class="player-track-title" id="fullscreenTrackTitle">Название трека</h1>
                <p class="player-track-artist" id="fullscreenTrackArtist">Исполнитель</p>
            </div>

            <!-- Прогресс бар -->
            <div class="player-progress">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-time">
                    <span class="current-time" id="currentTime">0:00</span>
                    <span class="total-time" id="totalTime">0:00</span>
                </div>
            </div>

            <!-- Управление плеером -->
            <div class="player-controls-full">
                <button class="control-btn" id="shuffleBtn">
                    <i class="fas fa-random"></i>
                </button>
                <button class="control-btn" id="prevBtn">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn main-play-btn" id="fullscreenPlayBtn">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" id="nextBtn">
                    <i class="fas fa-step-forward"></i>
                </button>
                <button class="control-btn" id="repeatBtn">
                    <i class="fas fa-redo"></i>
                </button>
            </div>

            <!-- Дополнительные функции -->
            <div class="player-extra-controls">
                <button class="extra-btn" id="addToPlaylistBtn">
                    <i class="fas fa-list-music"></i>
                </button>
                <button class="extra-btn" id="fullscreenFavoriteBtn">
                    <i class="far fa-heart"></i>
                </button>
                <button class="extra-btn" id="shareBtn">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button class="extra-btn" id="volumeBtn">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>
        </div>

        <!-- Модальное окно настроек -->
        <div class="modal-overlay" id="settingsModal">
            <div class="modal-content glass-effect">
                <div class="modal-header">
                    <h2><i class="fas fa-cog"></i> Настройки</h2>
                    <button class="modal-close" id="closeSettingsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="settings-list">
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-palette"></i>
                                <div>
                                    <h4>Тема оформления</h4>
                                    <p>Светлая / Темная</p>
                                </div>
                            </div>
                            <select class="theme-select" id="themeSelect">
                                <option value="auto">Авто</option>
                                <option value="light">Светлая</option>
                                <option value="dark">Темная</option>
                                <option value="gradient">Градиент</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-volume-up"></i>
                                <div>
                                    <h4>Громкость</h4>
                                    <p>Уровень звука</p>
                                </div>
                            </div>
                            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80">
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-wifi"></i>
                                <div>
                                    <h4>Только Wi-Fi</h4>
                                    <p>Загрузка по Wi-Fi</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="wifiOnlyToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-bell"></i>
                                <div>
                                    <h4>Уведомления</h4>
                                    <p>О новых треках</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="notificationsToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-download"></i>
                                <div>
                                    <h4>Авто-загрузка</h4>
                                    <p>Избранных треков</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="autoDownloadToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-file-contract"></i>
                                <div>
                                    <h4>Пользовательское соглашение</h4>
                                    <p>Условия использования</p>
                                </div>
                            </div>
                            <button class="terms-btn" id="termsBtn">
                                <i class="fas fa-external-link-alt"></i>
                            </button>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-trash"></i>
                                <div>
                                    <h4>Очистить кэш</h4>
                                    <p>Удалить временные данные</p>
                                </div>
                            </div>
                            <button class="clear-cache-btn" id="clearCacheBtn">
                                Очистить
                            </button>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-info-circle"></i>
                                <div>
                                    <h4>О приложении</h4>
                                    <p>Версия 1.0.0</p>
                                </div>
                            </div>
                            <button class="about-btn" id="aboutBtn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Модальное окно эквалайзера -->
        <div class="modal-overlay" id="equalizerModal">
            <div class="modal-content glass-effect">
                <div class="modal-header">
                    <h2><i class="fas fa-sliders-h"></i> Эквалайзер</h2>
                    <button class="modal-close" id="closeEqualizerModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="equalizer-presets">
                        <h3>Пресеты:</h3>
                        <div class="presets-grid">
                            <button class="preset-btn active" data-preset="flat">
                                <i class="fas fa-sliders-h"></i>
                                <span>Плоский</span>
                            </button>
                            <button class="preset-btn" data-preset="bass">
                                <i class="fas fa-volume-up"></i>
                                <span>Бас</span>
                            </button>
                            <button class="preset-btn" data-preset="treble">
                                <i class="fas fa-wave-square"></i>
                                <span>Высокие</span>
                            </button>
                            <button class="preset-btn" data-preset="vocal">
                                <i class="fas fa-microphone"></i>
                                <span>Вокал</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="equalizer-sliders">
                        <div class="slider-item">
                            <span class="slider-label">60Hz</span>
                            <input type="range" class="eq-slider" min="-12" max="12" value="0" data-band="60hz">
                        </div>
                        <div class="slider-item">
                            <span class="slider-label">230Hz</span>
                            <input type="range" class="eq-slider" min="-12" max="12" value="0" data-band="230hz">
                        </div>
                        <div class="slider-item">
                            <span class="slider-label">910Hz</span>
                            <input type="range" class="eq-slider" min="-12" max="12" value="0" data-band="910hz">
                        </div>
                        <div class="slider-item">
                            <span class="slider-label">4kHz</span>
                            <input type="range" class="eq-slider" min="-12" max="12" value="0" data-band="4khz">
                        </div>
                        <div class="slider-item">
                            <span class="slider-label">14kHz</span>
                            <input type="range" class="eq-slider" min="-12" max="12" value="0" data-band="14khz">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Футер -->
        <footer class="app-footer glass-effect">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-music"></i> EDM_Music
                </div>
                
                <div class="footer-info">
                    <p class="support-text">
                        <i class="fas fa-headset"></i> Support: @EDEM_CR
                    </p>
                    <p class="channel-text">
                        <i class="fab fa-telegram"></i> Telegram channel:
                    </p>
                    <a href="https://t.me/EDM_tm" target="_blank" class="telegram-link">
                        https://t.me/EDM_tm
                    </a>
                </div>
                
                <button class="terms-button glass-effect" id="footerTermsBtn">
                    <i class="fas fa-file-contract"></i> Пользовательское соглашение
                </button>
            </div>
        </footer>

        <!-- Toast уведомления -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <!-- Аудио элемент -->
    <audio id="audioPlayer" preload="auto"></audio>

    <script src="script.js"></script>
</body>
</html>

<!-- Продолжение index.html -->

<!-- Модальное окно плейлистов -->
<div class="modal-overlay" id="playlistsModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-list-music"></i> Мои плейлисты</h2>
            <button class="modal-close" id="closePlaylistsModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="create-playlist">
                <input type="text" 
                       id="newPlaylistName" 
                       class="playlist-input"
                       placeholder="Название нового плейлиста">
                <button class="create-playlist-btn" id="createPlaylistBtn">
                    <i class="fas fa-plus"></i> Создать
                </button>
            </div>
            
            <div class="playlists-list" id="playlistsList">
                <!-- Плейлисты будут загружены динамически -->
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно добавления в плейлист -->
<div class="modal-overlay" id="addToPlaylistModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-plus-circle"></i> Добавить в плейлист</h2>
            <button class="modal-close" id="closeAddToPlaylistModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="playlists-select-list" id="playlistsSelectList">
                <!-- Список плейлистов для выбора -->
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно истории -->
<div class="modal-overlay" id="historyModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-history"></i> История прослушивания</h2>
            <button class="modal-close" id="closeHistoryModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="history-list" id="historyList">
                <!-- История будет загружена динамически -->
            </div>
        </div>
    </div>
</div>

<!-- Контекстное меню для треков -->
<div class="context-menu glass-effect" id="contextMenu">
    <button class="context-item" data-action="play">
        <i class="fas fa-play"></i> Воспроизвести
    </button>
    <button class="context-item" data-action="add-to-favorites">
        <i class="far fa-heart"></i> В избранное
    </button>
    <button class="context-item" data-action="add-to-playlist">
        <i class="fas fa-list-music"></i> Добавить в плейлист
    </button>
    <button class="context-item" data-action="share">
        <i class="fas fa-share-alt"></i> Поделиться
    </button>
    <button class="context-item" data-action="download">
        <i class="fas fa-download"></i> Скачать
    </button>
    <button class="context-item" data-action="view-details">
        <i class="fas fa-info-circle"></i> Подробнее
    </button>
</div>

<!-- Меню плеера -->
<div class="player-menu glass-effect" id="playerMenu">
    <button class="menu-item" data-action="add-to-queue">
        <i class="fas fa-plus-circle"></i> Добавить в очередь
    </button>
    <button class="menu-item" data-action="view-album">
        <i class="fas fa-compact-disc"></i> К альбому
    </button>
    <button class="menu-item" data-action="view-artist">
        <i class="fas fa-user"></i> К исполнителю
    </button>
    <button class="menu-item" data-action="sleep-timer">
        <i class="fas fa-clock"></i> Таймер сна
    </button>
    <button class="menu-item" data-action="equalizer">
        <i class="fas fa-sliders-h"></i> Эквалайзер
    </button>
</div>

<!-- Окно о приложении -->
<div class="modal-overlay" id="aboutModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-info-circle"></i> О приложении</h2>
            <button class="modal-close" id="closeAboutModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="about-content">
                <div class="about-logo">
                    <div class="about-logo-icon">
                        <i class="fas fa-music"></i>
                    </div>
                    <h3>EDM Music</h3>
                    <p class="version">Версия 1.0.0</p>
                </div>
                
                <div class="about-description">
                    <p>Лучшее приложение для прослушивания EDM музыки с современным дизайном и мощным функционалом.</p>
                    
                    <div class="features-list">
                        <div class="feature">
                            <i class="fas fa-headphones"></i>
                            <span>Бесплатная музыка</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-heart"></i>
                            <span>Избранные треки</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-sliders-h"></i>
                            <span>Эквалайзер</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-download"></i>
                            <span>Скачивание</span>
                        </div>
                    </div>
                    
                    <div class="contact-info">
                        <h4>Контакты:</h4>
                        <p><i class="fab fa-telegram"></i> Канал: <a href="https://t.me/EDM_tm" target="_blank">@EDM_tm</a></p>
                        <p><i class="fas fa-headset"></i> Поддержка: @EDEM_CR</p>
                    </div>
                    
                    <div class="developer-info">
                        <p>Разработано с <i class="fas fa-heart" style="color: #ff6b6b;"></i> для любителей музыки</p>
                        <p class="copyright">© 2024 EDM Music. Все права защищены.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Окно редактирования профиля -->
<div class="modal-overlay" id="editProfileModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-user-edit"></i> Редактировать профиль</h2>
            <button class="modal-close" id="closeEditProfileModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editUsername">
                        <i class="fas fa-user"></i> Имя пользователя
                    </label>
                    <input type="text" 
                           id="editUsername" 
                           class="form-input"
                           placeholder="Введите новое имя"
                           required>
                </div>
                
                <div class="form-group">
                    <label for="editAvatar">
                        <i class="fas fa-image"></i> URL аватара
                    </label>
                    <input type="text" 
                           id="editAvatar" 
                           class="form-input"
                           placeholder="Ссылка на новый аватар">
                </div>
                
                <div class="form-group">
                    <label for="currentPassword">
                        <i class="fas fa-lock"></i> Текущий пароль
                    </label>
                    <input type="password" 
                           id="currentPassword" 
                           class="form-input"
                           placeholder="Для подтверждения изменений"
                           required>
                </div>
                
                <div class="form-group">
                    <label for="newPassword">
                        <i class="fas fa-key"></i> Новый пароль
                    </label>
                    <input type="password" 
                           id="newPassword" 
                           class="form-input"
                           placeholder="Оставьте пустым, если не меняете">
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">
                        <i class="fas fa-key"></i> Подтвердите пароль
                    </label>
                    <input type="password" 
                           id="confirmPassword" 
                           class="form-input"
                           placeholder="Подтвердите новый пароль">
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="save-profile-btn">
                        <i class="fas fa-save"></i> Сохранить изменения
                    </button>
                    <button type="button" class="cancel-btn" id="cancelEditProfile">
                        Отмена
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Окно таймера сна -->
<div class="modal-overlay" id="sleepTimerModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-clock"></i> Таймер сна</h2>
            <button class="modal-close" id="closeSleepTimerModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="timer-options">
                <button class="timer-option" data-minutes="5">
                    5 минут
                </button>
                <button class="timer-option" data-minutes="15">
                    15 минут
                </button>
                <button class="timer-option" data-minutes="30">
                    30 минут
                </button>
                <button class="timer-option" data-minutes="45">
                    45 минут
                </button>
                <button class="timer-option" data-minutes="60">
                    1 час
                </button>
                <button class="timer-option" data-minutes="0">
                    Выключить
                </button>
            </div>
            
            <div class="custom-timer">
                <h4>Свое время:</h4>
                <div class="custom-timer-inputs">
                    <input type="number" 
                           id="customMinutes" 
                           class="timer-input"
                           min="1" 
                           max="180"
                           placeholder="мин"
                           value="30">
                    <span class="timer-label">минут</span>
                </div>
                <button class="set-custom-timer-btn" id="setCustomTimerBtn">
                    Установить
                </button>
            </div>
            
            <div class="timer-status">
                <p id="timerStatusText">Таймер не установлен</p>
                <div class="timer-display" id="timerDisplay" style="display: none;">
                    <span id="timerTime">00:00</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Окно очереди воспроизведения -->
<div class="modal-overlay" id="queueModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-list-ol"></i> Очередь воспроизведения</h2>
            <button class="modal-close" id="closeQueueModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="queue-list" id="queueList">
                <!-- Очередь будет загружена динамически -->
            </div>
            
            <div class="queue-actions">
                <button class="queue-action-btn" id="clearQueueBtn">
                    <i class="fas fa-trash"></i> Очистить очередь
                </button>
                <button class="queue-action-btn" id="shuffleQueueBtn">
                    <i class="fas fa-random"></i> Перемешать
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Окно информации о треке -->
<div class="modal-overlay" id="trackInfoModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-info-circle"></i> Информация о треке</h2>
            <button class="modal-close" id="closeTrackInfoModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="track-info-content" id="trackInfoContent">
                <!-- Информация будет загружена динамически -->
            </div>
        </div>
    </div>
</div>

<!-- Окно загрузки -->
<div class="loading-overlay" id="loadingOverlay" style="display: none;">
    <div class="loading-content">
        <div class="loading-spinner">
            <div class="spinner-circle"></div>
            <div class="spinner-circle"></div>
            <div class="spinner-circle"></div>
        </div>
        <p class="loading-text">Загрузка...</p>
    </div>
</div>

<!-- Волны для визуализации аудио -->
<div class="audio-visualizer" id="audioVisualizer">
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
    <div class="visualizer-bar"></div>
</div>

<!-- Завершение index.html -->

<!-- Пагинация (будет отображаться при необходимости) -->
<div class="pagination-container glass-effect" id="paginationContainer" style="display: none;">
    <div class="pagination">
        <button class="pagination-btn prev-btn" id="paginationPrev">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="page-numbers">
            <button class="page-number" data-page="1">1</button>
            <button class="page-number" data-page="2">2</button>
            <button class="page-number active" data-page="3">3</button>
            <button class="page-number" data-page="4">4</button>
            <button class="page-number" data-page="5">5</button>
        </div>
        
        <button class="pagination-btn next-btn" id="paginationNext">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

<!-- Модальное окно громкости -->
<div class="modal-overlay" id="volumeModal">
    <div class="modal-content glass-effect volume-modal">
        <div class="modal-header">
            <h2><i class="fas fa-volume-up"></i> Громкость</h2>
            <button class="modal-close" id="closeVolumeModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="volume-controls">
                <div class="volume-icon">
                    <i class="fas fa-volume-mute" id="volumeMuteIcon"></i>
                    <i class="fas fa-volume-down" id="volumeLowIcon"></i>
                    <i class="fas fa-volume-up" id="volumeHighIcon"></i>
                </div>
                
                <input type="range" 
                       class="volume-slider-full" 
                       id="volumeSliderFull" 
                       min="0" 
                       max="100" 
                       value="80">
                
                <div class="volume-percentage">
                    <span id="volumePercentage">80%</span>
                </div>
            </div>
            
            <div class="volume-presets">
                <button class="volume-preset" data-volume="25">
                    25%
                </button>
                <button class="volume-preset" data-volume="50">
                    50%
                </button>
                <button class="volume-preset" data-volume="75">
                    75%
                </button>
                <button class="volume-preset" data-volume="100">
                    100%
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно качества звука -->
<div class="modal-overlay" id="qualityModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-compact-disc"></i> Качество звука</h2>
            <button class="modal-close" id="closeQualityModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="quality-options">
                <button class="quality-option active" data-quality="high">
                    <i class="fas fa-star"></i>
                    <div>
                        <h4>Высокое</h4>
                        <p>320 kbps • Лучшее качество</p>
                    </div>
                </button>
                
                <button class="quality-option" data-quality="medium">
                    <i class="fas fa-music"></i>
                    <div>
                        <h4>Среднее</h4>
                        <p>192 kbps • Баланс</p>
                    </div>
                </button>
                
                <button class="quality-option" data-quality="low">
                    <i class="fas fa-wifi"></i>
                    <div>
                        <h4>Экономное</h4>
                        <p>128 kbps • Меньше трафика</p>
                    </div>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно статистики -->
<div class="modal-overlay" id="statsModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-chart-bar"></i> Статистика</h2>
            <button class="modal-close" id="closeStatsModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ff6b6b, #ffa8a8);">
                        <i class="fas fa-headphones"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalListened">0</h3>
                        <p>Всего прослушано</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4ecdc4, #44a08d);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalHours">0</h3>
                        <p>Часов музыки</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ffd166, #ff9a76);">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalFavorites">0</h3>
                        <p>В избранном</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #a78bfa, #7c3aed);">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalDownloads">0</h3>
                        <p>Скачано треков</p>
                    </div>
                </div>
            </div>
            
            <div class="stats-chart">
                <h3>Активность по дням</h3>
                <div class="chart-container">
                    <canvas id="activityChart"></canvas>
                </div>
            </div>
            
            <div class="top-genres">
                <h3>Любимые жанры</h3>
                <div class="genres-list" id="genresList">
                    <!-- Жанры будут загружены динамически -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно скачивания -->
<div class="modal-overlay" id="downloadModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-download"></i> Скачивание</h2>
            <button class="modal-close" id="closeDownloadModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="download-options">
                <div class="download-option">
                    <div class="option-icon">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="option-info">
                        <h4>Только аудио</h4>
                        <p>MP3 • Высокое качество</p>
                    </div>
                    <button class="download-btn" data-type="audio">
                        Скачать
                    </button>
                </div>
                
                <div class="download-option">
                    <div class="option-icon">
                        <i class="fas fa-compact-disc"></i>
                    </div>
                    <div class="option-info">
                        <h4>Аудио + обложка</h4>
                        <p>ZIP архив с метаданными</p>
                    </div>
                    <button class="download-btn" data-type="full">
                        Скачать
                    </button>
                </div>
            </div>
            
            <div class="download-quality">
                <h4>Качество:</h4>
                <select class="quality-select" id="downloadQuality">
                    <option value="320">320 kbps (Лучшее)</option>
                    <option value="256">256 kbps (Высокое)</option>
                    <option value="192" selected>192 kbps (Стандартное)</option>
                    <option value="128">128 kbps (Экономное)</option>
                </select>
            </div>
            
            <div class="download-progress" id="downloadProgress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="downloadProgressFill"></div>
                </div>
                <div class="progress-text">
                    <span id="downloadProgressText">0%</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно общего доступа -->
<div class="modal-overlay" id="shareModal">
    <div class="modal-content glass-effect">
        <div class="modal-header">
            <h2><i class="fas fa-share-alt"></i> Поделиться</h2>
            <button class="modal-close" id="closeShareModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="modal-body">
            <div class="share-options">
                <button class="share-option" data-platform="telegram">
                    <i class="fab fa-telegram"></i>
                    <span>Telegram</span>
                </button>
                
                <button class="share-option" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </button>
                
                <button class="share-option" data-platform="copy">
                    <i class="fas fa-copy"></i>
                    <span>Копировать ссылку</span>
                </button>
                
                <button class="share-option" data-platform="message">
                    <i class="fas fa-envelope"></i>
                    <span>Сообщение</span>
                </button>
            </div>
            
            <div class="share-preview">
                <div class="preview-card">
                    <div class="preview-image" id="sharePreviewImage"></div>
                    <div class="preview-info">
                        <h4 id="shareTrackTitle">Название трека</h4>
                        <p id="shareTrackArtist">Исполнитель</p>
                        <p class="preview-note">Слушайте в EDM Music</p>
                    </div>
                </div>
            </div>
            
            <div class="share-link">
                <input type="text" 
                       class="share-link-input" 
                       id="shareLinkInput"
                       readonly
                       value="https://t.me/EDM_tm">
                <button class="copy-link-btn" id="copyLinkBtn">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Плавающая кнопка меню -->
<button class="floating-menu-btn glass-effect" id="floatingMenuBtn">
    <i class="fas fa-bars"></i>
</button>

<!-- Флоатинг меню -->
<div class="floating-menu glass-effect" id="floatingMenu">
    <button class="floating-menu-item" data-action="settings">
        <i class="fas fa-cog"></i>
        <span>Настройки</span>
    </button>
    
    <button class="floating-menu-item" data-action="equalizer">
        <i class="fas fa-sliders-h"></i>
        <span>Эквалайзер</span>
    </button>
    
    <button class="floating-menu-item" data-action="sleep-timer">
        <i class="fas fa-clock"></i>
        <span>Таймер сна</span>
    </button>
    
    <button class="floating-menu-item" data-action="queue">
        <i class="fas fa-list-ol"></i>
        <span>Очередь</span>
    </button>
    
    <button class="floating-menu-item" data-action="stats">
        <i class="fas fa-chart-bar"></i>
        <span>Статистика</span>
    </button>
    
    <button class="floating-menu-item" data-action="about">
        <i class="fas fa-info-circle"></i>
        <span>О приложении</span>
    </button>
</div>

<!-- Аудио контекст для визуализации -->
<audio id="backgroundAudio" preload="none"></audio>

<!-- Подключаем Chart.js для графиков -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Инициализация приложения -->
<script>
    // Инициализация приложения
    document.addEventListener('DOMContentLoaded', function() {
        // Убираем прелоадер сразу
        document.getElementById('loadingOverlay').style.display = 'none';
        
        // Запускаем инициализацию приложения
        if (typeof initApp === 'function') {
            initApp();
        }
    });
</script>

